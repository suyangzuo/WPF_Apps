<?xml version="1.0" encoding="utf-8" ?>
<Window
  x:Class="WPF_Typing.DarkDialog"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  Title="DarkDialog"
  Width="400"
  Height="200"
  AllowsTransparency="True"
  Background="Transparent"
  FontFamily="{DynamicResource DialogFontFamily}"
  WindowStartupLocation="CenterOwner"
  WindowStyle="None">
  <Window.Resources>
    <FontFamily x:Key="DialogFontFamily">Google Sans Code, Consolas, HarmonyOS Sans SC, 微软雅黑</FontFamily>

    <Style x:Key="DialogOkButtonStyle" TargetType="Button">
      <Setter Property="OverridesDefaultStyle" Value="True" />
      <Setter Property="Background" Value="#2D2D2D" />
      <Setter Property="Foreground" Value="#FFFFFF" />
      <Setter Property="BorderBrush" Value="#555" />
      <Setter Property="BorderThickness" Value="1" />
      <Setter Property="Padding" Value="6,2" />
      <Setter Property="Cursor" Value="Hand" />
      <Setter Property="FocusVisualStyle" Value="{x:Null}" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border
              x:Name="Bd"
              Padding="{TemplateBinding Padding}"
              Background="{TemplateBinding Background}"
              BorderBrush="{TemplateBinding BorderBrush}"
              BorderThickness="{TemplateBinding BorderThickness}"
              CornerRadius="4">
              <ContentPresenter
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                RecognizesAccessKey="True" />
            </Border>
            <ControlTemplate.Triggers>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="Bd" Property="Background" Value="#555555" />
              </Trigger>
              <Trigger Property="IsPressed" Value="True">
                <Setter TargetName="Bd" Property="Background" Value="#2A2A2A" />
              </Trigger>
              <Trigger Property="IsKeyboardFocused" Value="True">
                <Setter TargetName="Bd" Property="Background" Value="#333333" />
              </Trigger>
              <Trigger Property="IsFocused" Value="True">
                <Setter TargetName="Bd" Property="Background" Value="#333333" />
              </Trigger>
              <Trigger Property="IsEnabled" Value="False">
                <Setter TargetName="Bd" Property="Opacity" Value="0.5" />
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style x:Key="DialogCloseButtonStyle" TargetType="Button">
      <Setter Property="OverridesDefaultStyle" Value="True" />
      <Setter Property="Background" Value="Transparent" />
      <Setter Property="Foreground" Value="#FFFFFF" />
      <Setter Property="BorderThickness" Value="0" />
      <Setter Property="Width" Value="30" />
      <Setter Property="Height" Value="28" />
      <Setter Property="Cursor" Value="Hand" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border
              x:Name="bd"
              Background="{TemplateBinding Background}"
              CornerRadius="0">
              <Viewbox
                Width="12"
                Height="12"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
                <Canvas Width="12" Height="12">
                  <Path
                    Data="M2,2 L10,10 M10,2 L2,10"
                    Stroke="White"
                    StrokeEndLineCap="Round"
                    StrokeStartLineCap="Round"
                    StrokeThickness="1.6" />
                </Canvas>
              </Viewbox>
            </Border>
            <ControlTemplate.Triggers>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="bd" Property="Background" Value="#E81123" />
              </Trigger>
              <Trigger Property="IsPressed" Value="True">
                <Setter TargetName="bd" Property="Background" Value="#C50F1F" />
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </Window.Resources>

  <Border
    Padding="0"
    Background="#1E1E1E"
    BorderBrush="#444"
    BorderThickness="1"
    CornerRadius="8">
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
      </Grid.RowDefinitions>

      <Border
        Grid.Row="0"
        Padding="8"
        Background="#303030"
        CornerRadius="8,8,0,0"
        MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
          </Grid.ColumnDefinitions>

          <!-- Left icon (loaded from app folder Assets) -->
          <Image Grid.Column="0"
                 Width="20"
                 Height="20"
                 Margin="0,0,8,0"
                 VerticalAlignment="Center"
                 SnapsToDevicePixels="True"
                 Stretch="Uniform"
                 Source="pack://siteoforigin:,,,/Assets/Images/PNG/十指禅.png" />

          <TextBlock x:Name="TitleText"
                     Grid.Column="1"
                     HorizontalAlignment="Left"
                     VerticalAlignment="Center"
                     Foreground="#EEE"
                     FontWeight="Bold"
                     FontSize="14"
                     Text="Title" />

          <Button x:Name="CloseTopButton"
                  Grid.Column="2"
                  Style="{StaticResource DialogCloseButtonStyle}"
                  HorizontalAlignment="Right"
                  VerticalAlignment="Center"
                  Click="CloseButton_Click"
                  ToolTip="Close" />
        </Grid>
      </Border>

      <ScrollViewer
        Grid.Row="1"
        Margin="12"
        VerticalScrollBarVisibility="Auto">
        <TextBlock
          x:Name="MessageText"
          Foreground="#DDD"
          Text="Message"
          TextWrapping="Wrap" />
      </ScrollViewer>

      <StackPanel
        Grid.Row="2"
        Margin="12"
        HorizontalAlignment="Right"
        Orientation="Horizontal">
        <Button
          x:Name="OkButton"
          Width="80"
          Height="30"
          Margin="6,0,0,0"
          Click="OkButton_Click"
          Content="确定"
          Style="{StaticResource DialogOkButtonStyle}" />
      </StackPanel>
    </Grid>
  </Border>
</Window>